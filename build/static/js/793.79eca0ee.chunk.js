"use strict";(self.webpackChunknaja=self.webpackChunknaja||[]).push([[793],{5793:(e,s,t)=>{t.r(s),t.d(s,{default:()=>g});var a=t(5043),c=t(9023),l=t(3216),n=(t(7949),t(5475)),r=t(8155),o=t(2462),i=t(1142),d=t(8273),m=t(984),u=t(378),h=t(6213),x=t(9748),p=t(579);const g=function(){const[e,s]=(0,a.useState)(""),[t,g]=(0,a.useState)([]),[j,_]=(0,a.useState)(0),[f,y]=(0,a.useState)(!1),[v,N]=(0,a.useState)([]),[b,A]=(0,a.useState)([]),[w,S]=(0,a.useState)(""),[C,H]=(0,a.useState)(""),[T,k]=(0,a.useState)([]),[D,q]=(0,a.useState)([]),{user:z,logout:L}=(0,a.useContext)(u.R),{isLoggedIn:E,userName:F,userId:I,img:G}=z,P=(0,l.zy)(),[B,R]=(0,a.useState)(""),[W,U]=(0,a.useState)(""),[$,M]=(0,a.useState)(""),[O,V]=(0,a.useState)(""),[Z,J]=(0,a.useState)(""),[K,Q]=(0,a.useState)(""),[X,Y]=(0,a.useState)(""),[ee,se]=(0,a.useState)(""),[te,ae]=(0,a.useState)(""),[ce,le]=(0,a.useState)(""),[ne,re]=(0,a.useState)(""),[oe,ie]=(0,a.useState)(""),[de,me]=(0,a.useState)(!1),[ue,he]=(0,a.useState)(!1),[xe,pe]=(0,a.useState)(!1),[ge,je]=(0,a.useState)(""),[_e,fe]=(0,a.useState)(""),ye=e=>{_(0);const t=e.target.value;s(t);const a=v.filter((e=>e.subject_name.toLowerCase().includes(t.toLowerCase())));g(a)},ve=()=>y(!1),[Ne,be]=(0,a.useState)(0);(0,a.useEffect)((()=>{const e=new URLSearchParams(P.search).get("department");S(e||null)}),[P.search]),(0,a.useEffect)((()=>{(async()=>{const e=w||new URLSearchParams(P.search).get("department"),s=ge;let t="".concat(x.H,"/Courses");e&&s?(t="".concat(x.H,"/Courses/filter/").concat(e,"/").concat(s),console.log("Filtering by Department and Teacher:",t)):e?t="".concat(x.H,"/Courses/getbydep/").concat(e):s&&(t="".concat(x.H,"/TeacherRoutes/teachercourse/").concat(s));try{const e=(await h.A.get(t)).data;if(0===e.length)return fe("\u0644\u0627 \u064a\u0648\u062c\u062f \u0645\u0648\u0627\u062f \u0645\u062a\u0627\u062d\u0629 "),q([]),N([]),void be(0);{fe("");const s=await Promise.all(e.map((async e=>{try{var s;const[t,a]=await Promise.all([h.A.get("".concat(x.H,"/Courses/users-counts/").concat(e.id)),h.A.get("".concat(x.H,"/Courses/lesson-counts/").concat(e.id))]),c=a.data,l=Array.isArray(c)&&c.length>0?c[0].lesson_count:0;return{...e,student_count:(null===(s=t.data)||void 0===s?void 0:s.student_count)||0,lesson_count:l||0}}catch(t){return console.error("Error fetching data for course ".concat(e.id,":"),t),{...e,student_count:0,lesson_count:0}}})));q(s),N(s.slice(9*j,9*(j+1))),be(Math.ceil(s.length/9))}}catch(a){console.error("Error fetching courses:",a)}})()}),[w,j,ge]),(0,a.useEffect)((()=>{window.scrollTo(0,0);(async()=>{try{const e=await h.A.get("".concat(x.H,"/departments/getDepartments"));A(e.data)}catch(e){console.error("Error fetching departments:",e)}})()}),[]),(0,a.useEffect)((()=>{(async()=>{if(w)try{const e=await h.A.get("".concat(x.H,"/Courses/getbydep/").concat(w)),s=e.data.reduce(((e,s)=>{var t,a;const c=null===(t=s.teacher)||void 0===t?void 0:t.teacher_name,l=s.teacher_id,n=null===(a=s.teacher)||void 0===a?void 0:a.email,r=e.some((e=>e.teacher_id===l));return c&&l&&n&&!r&&e.push({teacher_id:l,teacher_name:c,email:n}),e}),[]);k(s)}catch(e){console.error("Error fetching teacher data:",e)}})()}),[w]);const Ae=()=>{we()&&_(j+1)},we=()=>9*(j+1)<D.length,Se=e?t:v;(0,a.useEffect)((()=>{}),[v,t,Se]);const[Ce,He]=(0,a.useState)([]),{hash:Te}=(P.pathname,(0,l.zy)());return(0,a.useEffect)((()=>{if(Te){const e=document.querySelector(Te);e&&e.scrollIntoView({behavior:"smooth"})}}),[Te]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.A,{slider:Ce}),(0,p.jsx)("div",{className:"container courses_margin",id:"order-section",children:(0,p.jsxs)("div",{className:"row ",children:[(0,p.jsx)("div",{className:"col-lg-4 col-md-4 col-sm-12",children:(0,p.jsxs)("div",{className:"navbar__search",children:[(0,p.jsxs)("span",{children:[(0,p.jsx)("i",{className:"fa-solid fa-magnifying-glass fa-sm",style:{color:"#833988"}})," "]}),(0,p.jsx)("input",{type:"text",placeholder:"\u0627\u0628\u062d\u062b \u0639\u0646 \u0645\u0627\u062f\u0629",value:e,className:"search_course",onChange:ye}),(0,p.jsx)("a",{href:"#",className:"btn btn-s purple_btn search_btn",onChange:ye,children:"\u0628\u062d\u062b"})]})}),(0,p.jsx)("div",{className:"col-lg-4 col-md-4 col-sm-12",children:(0,p.jsxs)("select",{name:"department",value:w,onChange:e=>{const s=e.target.value;S(s),_(0)},id:"lang",className:"select_dep",children:[(0,p.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0642\u0633\u0645"}),b.map((e=>(0,p.jsx)("option",{value:e.id,children:e.title},e.id)))]})}),(0,p.jsx)("div",{className:"col-lg-4 col-md-4 col-sm-12",children:(0,p.jsxs)("select",{name:"teacher",value:C,onChange:e=>{const s=e.target.value;H(s),console.log("first",s),console.log("first",T);const t=T.find((e=>e.teacher_id.toString()===s));console.log("teach",t),je(t?t.email:""),_(0)},id:"lang",className:"select_dep",children:[(0,p.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0633\u062a\u0627\u0630"}),T.map((e=>(0,p.jsx)("option",{value:e.teacher_id,children:e.teacher_name},e.id)))]})})]})}),(0,p.jsxs)("div",{className:"container text-center purchaseDepartment_box",children:[(0,p.jsxs)("h2",{className:"h_home_box",children:[" ","\u0627\u063a\u062a\u0646\u0645 \u0627\u0644\u0641\u0631\u0635\u0629 \u0627\u0644\u0622\u0646 \u0641\u064a \u0642\u0633\u0645\u0646\u0627 \u0627\u0644\u0631\u0642\u0645\u064a \u0627\u0644\u0645\u062a\u0642\u062f\u0645!"]}),(0,p.jsx)("p",{className:"p_home_box",children:"\u0627\u0634\u062a\u0631\u064a \u0627\u0644\u0627\u0646 \u0644\u062a\u0623\u0645\u064a\u0646 \u0645\u0643\u0627\u0646\u0643 \u0641\u064a \u0627\u0644\u0642\u0633\u0645 \u0627\u0644\u0630\u064a \u0633\u064a\u063a\u064a\u0631 \u0645\u0633\u062a\u0642\u0628\u0644\u0643!"}),(0,p.jsx)("button",{type:"button",className:"btn btn-light click_here_btn",onClick:()=>{E?y(!0):me(!0)},children:"\u0627\u0636\u063a\u0637 \u0647\u0646\u0627"}),(0,p.jsxs)(i.A,{show:f,onHide:ve,dir:"rtl",children:[(0,p.jsx)(i.A.Title,{className:"modal_title",children:"\u0634\u0631\u0627\u0621 \u0642\u0633\u0645"}),(0,p.jsx)(i.A.Body,{children:(0,p.jsxs)(o.A,{id:"buyDepartmentForm",children:[(0,p.jsxs)(o.A.Group,{className:"mb-3",children:[(0,p.jsx)(o.A.Label,{className:"text_field",children:"\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628"}),(0,p.jsx)(o.A.Control,{type:"text",className:"input_filed_modal ".concat(ee?"border-danger":""),value:B,onChange:e=>R(e.target.value),required:!0}),ee&&(0,p.jsx)(o.A.Text,{className:"text-danger",children:ee})]}),(0,p.jsxs)(o.A.Group,{className:"mb-3",children:[(0,p.jsx)(o.A.Label,{className:"text_field text-center",children:"\u0627\u0644\u0623\u064a\u0645\u064a\u0644"}),(0,p.jsx)(o.A.Control,{type:"email",className:"input_filed_modal ".concat(te?"border-danger":""),value:W,onChange:e=>U(e.target.value),required:!0}),te&&(0,p.jsx)(o.A.Text,{className:"text-danger",children:te})]}),(0,p.jsxs)(o.A.Group,{className:"mb-3",children:[(0,p.jsx)(o.A.Label,{className:"text_field text-center",children:"\u0645\u0643\u0627\u0646 \u0627\u0644\u0633\u0643\u0646"}),(0,p.jsx)(o.A.Control,{type:"text",className:"input_filed_modal ".concat(ce?"border-danger":""),value:$,onChange:e=>M(e.target.value),required:!0}),ce&&(0,p.jsx)(o.A.Text,{className:"text-danger",children:ce})]}),(0,p.jsxs)(o.A.Group,{className:"mb-3",children:[(0,p.jsx)(o.A.Label,{className:"text_field text-center",children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641"}),(0,p.jsx)(o.A.Control,{type:"text",className:"input_filed_modal ".concat(ne?"border-danger":""),value:O,onChange:e=>V(e.target.value),required:!0}),ne&&(0,p.jsx)(o.A.Text,{className:"text-danger",children:ne})]}),(0,p.jsxs)(o.A.Group,{className:"mb-3",children:[(0,p.jsx)(o.A.Label,{className:"text_field text-center",children:"\u0627\u0644\u0642\u0633\u0645"}),(0,p.jsxs)(o.A.Control,{as:"select",value:w,onChange:e=>S(e.target.value),className:"select_dep ".concat(oe?"border-danger":""),children:[(0,p.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0642\u0633\u0645"}),b.map((e=>(0,p.jsx)("option",{value:e.id,children:e.title},e.id)))]}),oe&&(0,p.jsx)(o.A.Text,{className:"text-danger",children:oe})]}),(0,p.jsxs)(o.A.Group,{className:"mb-3",children:[(0,p.jsx)(o.A.Label,{className:"text_field text-center",children:"\u0627\u0644\u0643\u0648\u0628\u0648\u0646"}),(0,p.jsx)(o.A.Control,{type:"text",className:"input_filed_modal ".concat(X?"border-danger":""),value:Z,onChange:e=>J(e.target.value),required:!0}),X&&(0,p.jsx)(o.A.Text,{className:"text-danger",children:X})]})]})}),(0,p.jsx)(i.A.Footer,{children:(0,p.jsx)(r.A,{type:"submit",onClick:async e=>{e.preventDefault();const s={};if(B||(s.studentName="\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628 \u0645\u0637\u0644\u0648\u0628"),W&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(W)||(s.email="\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u063a\u064a\u0631 \u0635\u062d\u064a\u062d"),$||(s.address="\u0645\u0643\u0627\u0646 \u0627\u0644\u0633\u0643\u0646 \u0645\u0637\u0644\u0648\u0628"),O&&/^\d+$/.test(O)||(s.phone="\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d"),w||(s.department="\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0642\u0633\u0645"),se(s.studentName||""),ae(s.email||""),le(s.address||""),re(s.phone||""),ie(s.department||""),Y(s.couponCode||""),!(Object.keys(s).length>0))try{const e=await h.A.get("".concat(x.H,"/Coupons/getCouponByCode/").concat(Z));if(e.data.department_id!==parseInt(w,10))return void Y("\u0627\u0644\u0643\u0648\u0628\u0648\u0646 \u0644\u0627 \u064a\u0646\u0637\u0628\u0642 \u0639\u0644\u0649 \u0647\u0630\u0627 \u0627\u0644\u0642\u0633\u0645");const s=localStorage.getItem("id");if(!s)return void Q("User ID not found. Please log in.");try{await h.A.post("".concat(x.H,"/PaymentsDepartments/buy"),{student_name:B,email:W,address:$,phone:O,coupon_code:Z,department_id:w,user_id:s});Q("Request was successful!"),ve(),pe(!0),he(!0),R(""),U(""),M(""),V(""),J("")}catch(n){var t,a,c;console.error("Error submitting form:",(null===(t=n.response)||void 0===t?void 0:t.data)||n.message),"Invalid or already used coupon"===(null===(a=n.response)||void 0===a||null===(c=a.data)||void 0===c?void 0:c.error)?Y("\u0631\u0642\u0645 \u0627\u0644\u0643\u0648\u0628\u0648\u0646 \u063a\u064a\u0631 \u0635\u0627\u0644\u062d \u0623\u0648 \u062a\u0645 \u0627\u0633\u062a\u062e\u062f\u0627\u0645\u0647 \u0645\u0646 \u0642\u0628\u0644"):Q("There was an error with your submission.")}}catch(n){var l;console.error("Error fetching coupon data:",(null===(l=n.response)||void 0===l?void 0:l.data)||n.message),Y("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u0631\u0642\u0645 \u0627\u0644\u0643\u0648\u0628\u0648\u0646")}},form:"buyDepartmentForm",className:"buy_department_btn",children:"\u0634\u0631\u0627\u0621 \u0627\u0644\u0622\u0646"})})]})]}),(0,p.jsxs)("div",{className:"slick-wrapper",children:[(0,p.jsx)("div",{className:"container ",children:_e?(0,p.jsx)("div",{className:"no-courses-message d-flex justify-content-center ",style:{color:"#833988"},children:(0,p.jsx)("p",{children:_e})}):Se.length>0&&(0,p.jsxs)("div",{className:"row justify-content-center align-items-center",children:[Se.map(((e,s)=>(0,p.jsxs)("div",{className:"col-lg-4 col-md-6 col-sm-12",children:[(0,p.jsx)("div",{className:"slide ".concat(s===j?"active":""),children:(0,p.jsx)(n.N_,{to:"/coursedetails/".concat(e.id),className:"link_card",children:(0,p.jsxs)("div",{className:"card card_cont",children:[(0,p.jsx)("img",{src:"https://res.cloudinary.com/durjqlivi/".concat(e.img),className:"card-img-top img-fluid card_img",alt:"course",loading:"lazy"}),(0,p.jsxs)("div",{className:"card-body",children:[(0,p.jsx)("div",{children:(0,p.jsxs)("p",{className:"card-text card_dep",children:[" ",e.Department.title]})}),(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsx)("p",{className:"course_title_card",children:e.subject_name})," ",(0,p.jsx)("p",{className:" teacher_name_card",children:e.teacher.teacher_name})]}),(0,p.jsx)("hr",{style:{marginTop:"1px"}}),(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsx)("i",{className:"fa-solid fa-file card_icon",style:{color:"#F57D20"}}),(0,p.jsxs)("p",{className:"details_courses_card",children:[e.student_count," \u0637\u0627\u0644\u0628"]}),(0,p.jsx)("i",{className:"fa-solid fa-graduation-cap card_icon",style:{color:"#F57D20"}}),(0,p.jsxs)("p",{className:"details_courses_card",children:[e.lesson_count," \u062f\u0631\u0633"]}),(0,p.jsx)("i",{className:"fa-solid fa-clock card_icon",style:{color:"#F57D20"}})," ",(0,p.jsx)("p",{className:"details_courses_card",children:new Date(e.created_at).toLocaleDateString("en-GB",{year:"numeric",month:"numeric",day:"numeric"})})]})]})]})})},s)," "]}))),(0,p.jsxs)("div",{className:"col-md-12 col-sm-12 col_btn_prevNext",style:{marginTop:"10px"},children:[(0,p.jsxs)("button",{onClick:Ae,className:"btn mb-3  ",disabled:j===Ne-1,children:[" ",(0,p.jsx)("i",{className:"fa fa-arrow-right"})]}),(0,p.jsxs)("div",{style:{textAlign:"center",marginTop:"5px",fontSize:"18px"},children:[" ",(0,p.jsx)("span",{style:{fontWeight:"bold",paddingRight:"15px",paddingLeft:"15px"},children:j+1}),we()&&(0,p.jsx)("span",{style:{cursor:"pointer"},onClick:Ae,children:j+2})]}),(0,p.jsx)("button",{onClick:()=>{j>0&&_(j-1)},className:"btn  mb-3  ",children:(0,p.jsx)("i",{className:"fa fa-arrow-left"})})]})]})}),de&&(0,p.jsx)(d.A,{title_popup:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644",description_popup:"\u0644\u0634\u0631\u0627\u0621 \u0642\u0633\u0645 \u064a\u062c\u0628 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644",show:de,onClose:()=>{me(!1)}})]}),ue&&(0,p.jsx)(m.A,{title_popup_confirm:" \u062a\u0646\u0628\u064a\u0647",description_popup_confirm:"\u062a\u0645\u062a \u0627\u0644\u0639\u0645\u0644\u064a\u0629 \u0628\u0646\u062c\u0627\u062d ,\u0627\u0646\u062a\u0642\u0644 \u0627\u0644\u0649 \u062f\u0648\u0631\u0627\u062a\u064a",smShow:xe,onClose:()=>{he(!1)}})]})}},984:(e,s,t)=>{t.d(s,{A:()=>l});t(5043);var a=t(1142),c=t(579);const l=function(e){let{title_popup_confirm:s,description_popup_confirm:t,smShow:l,onClose:n}=e;return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(a.A,{size:"sm",show:l,onHide:n,"aria-labelledby":"example-modal-sizes-title-sm",children:[(0,c.jsx)(a.A.Header,{style:{display:"grid",placeItems:"center"},children:(0,c.jsx)(a.A.Title,{id:"example-modal-sizes-title-sm",children:(0,c.jsx)("i",{class:"fa-solid fa-circle-exclamation fa-xl",style:{color:"#833988"}})})}),(0,c.jsxs)(a.A.Body,{style:{display:"grid",placeItems:"center"},children:[(0,c.jsx)("h5",{style:{color:"#833988",fontWeight:700},children:s}),(0,c.jsx)("p",{style:{color:"#833988",fontWeight:400},children:t})," "]})]})})}},8273:(e,s,t)=>{t.d(s,{A:()=>o});var a=t(5043),c=t(8155),l=t(1142),n=t(5475),r=t(579);const o=function(e){let{title_popup:s,description_popup:t,show:o,onClose:i}=e;const[d,m]=(0,a.useState)(!1);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(l.A,{size:"sm",show:o,onHide:i,"aria-labelledby":"example-modal-sizes-title-sm",children:[(0,r.jsx)(l.A.Header,{style:{display:"grid",placeItems:"center"},children:(0,r.jsx)(l.A.Title,{id:"example-modal-sizes-title-sm",children:(0,r.jsx)("i",{class:"fa-solid fa-triangle-exclamation fa-xl",style:{color:"#934941"}})})}),(0,r.jsxs)(l.A.Body,{style:{display:"grid",placeItems:"center"},children:[(0,r.jsx)("h5",{style:{color:"#833988",fontWeight:700},children:s}),(0,r.jsx)("p",{style:{color:"#833988",fontWeight:400},children:t})," ",(0,r.jsxs)(n.N_,{to:"/login",children:[(0,r.jsx)(c.A,{className:"me-2",style:{backgroundColor:"#833988",border:"none"},children:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644      "}),"  "]})]})]})})}},9023:(e,s,t)=>{t.d(s,{A:()=>i});var a=t(5043),c=t(2382),l=(t(4430),t(9078),t(56),t(3216)),n=t(6213),r=t(9748),o=t(579);const i=function(){const[e,s]=(0,a.useState)([]),[t,i]=(0,a.useState)(!0),d=((0,l.Zp)(),(0,l.zy)().pathname);return(0,a.useEffect)((()=>{(async()=>{i(!0);try{const e=d.startsWith("/")?d.substring(1):d,t=await n.A.get("".concat(r.H,"/sliders/getSliderByPage/").concat(e));s(t.data)}catch(e){console.error("Failed to fetch slider:",e)}finally{i(!1)}})()}),[d]),(0,o.jsx)("div",{children:t?(0,o.jsx)("div",{className:"loading-spinner",children:"Loading..."}):(0,o.jsx)(c.A,{dots:!0,infinite:!0,slidesToShow:1,adaptiveHeight:!0,autoplay:!0,autoplaySpeed:5e3,arrows:!1,style:{overflow:"hidden"},children:e.map((e=>(0,o.jsxs)("div",{className:"slide-item",children:[e.slider_img?(0,o.jsx)("img",{srcSet:"https://res.cloudinary.com/durjqlivi/".concat(e.slider_img,"?w=800&f_auto&q_auto 800w,\n            https://res.cloudinary.com/durjqlivi/").concat(e.slider_img,"?w=1600&f_auto&q_auto 1600w"),src:"https://res.cloudinary.com/durjqlivi/".concat(e.slider_img,"?f_auto&q_auto"),sizes:"(max-width: 768px) 100vw, 50vw",alt:e.title||"slider img",className:"img_home",decoding:"async",loading:"lazy"}):(0,o.jsx)("img",{src:"https://example.com/placeholder.jpg",alt:"Default placeholder",className:"img_home",decoding:"async",loading:"lazy"}),(0,o.jsx)("div",{className:"overlay",children:(0,o.jsxs)("div",{className:"overlay-content",children:[(0,o.jsx)("h1",{className:"title_of_slidercomp",children:e.title}),(0,o.jsx)("p",{className:"paragraph_slider",children:e.descr||"\u0646\u062d\u0646 \u0647\u0646\u0627 \u062f\u0627\u0626\u0645\u064b\u0627 \u0644\u0645\u0633\u0627\u0639\u062f\u062a\u0643!"})]})})]},e.id)))})})}},7949:()=>{}}]);
//# sourceMappingURL=793.79eca0ee.chunk.js.map