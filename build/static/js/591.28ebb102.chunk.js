"use strict";(self.webpackChunknaja=self.webpackChunknaja||[]).push([[591],{6591:(e,s,a)=>{a.r(s),a.d(s,{default:()=>d});var c=a(5043),t=a(3216),r=a(5475),l=a(6213),o=a(378),n=a(8589),i=a(579);const d=function(){const[e,s]=(0,c.useState)(""),[d,u]=(0,c.useState)([]),[m,h]=(0,c.useState)([]),{user:v}=((0,t.Zp)(),(0,c.useContext)(o.R)),x=v.userId,[j,p]=(0,c.useState)(null),[_,f]=(0,c.useState)([]),[g,N]=(0,c.useState)("");return(0,c.useEffect)((()=>{(async()=>{try{const e=await l.A.get("".concat(n.H,"/PaymentsCourse/getApprovedCoursesForUser/").concat(x));h(e.data),u(e.data),e.data.length>0&&p(e.data[0].course_id)}catch(e){console.error("Error fetching approved courses:",e)}})()}),[x]),(0,c.useEffect)((()=>{(async()=>{try{const e=(await l.A.get("".concat(n.H,"/PaymentsCourse/getApprovedCoursesForUser/").concat(x))).data,s=await Promise.all(e.map((async e=>{try{var s;const a=await l.A.get("".concat(n.H,"/Courses/users-counts/").concat(e.course_id)),c=(await l.A.get("".concat(n.H,"/Courses/lesson-counts/").concat(e.course_id))).data,t=Array.isArray(c)&&c.length>0?c[0].lesson_count:0;return{...e,student_count:(null===(s=a.data)||void 0===s?void 0:s.student_count)||0,lesson_count:t||0}}catch(a){return console.error("Error fetching data for course ".concat(e.course_id,":"),a),{...e,student_count:0,lesson_count:0}}})));h(s),u(s)}catch(e){console.error("Error fetching approved courses:",e)}})()}),[x]),(0,c.useEffect)((()=>{(async()=>{try{const e=await l.A.get("".concat(n.H,"/departments/getDepartments"));f(e.data)}catch(e){console.error("Error fetching departments:",e)}})()}),[]),(0,c.useEffect)((()=>{(()=>{let s=m;e&&(s=s.filter((s=>s.subject_name.toLowerCase().includes(e.toLowerCase())))),g&&(s=s.filter((e=>e.department_id===parseInt(g)))),u(s)})()}),[e,g]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"slide-item",children:[(0,i.jsx)("img",{src:a(9661),alt:"Contact Video",className:"img_home",loading:"lazy"}),(0,i.jsx)("div",{className:"overlay",children:(0,i.jsx)("div",{className:"overlay-content",children:(0,i.jsx)("h1",{style:{fontWeight:"700",fontSize:"64px"},children:"\u062f\u0648\u0631\u0627\u062a\u064a"})})})]}),(0,i.jsx)("section",{className:"margin_section",children:(0,i.jsx)("div",{className:"container ",children:(0,i.jsxs)("div",{className:"row ",children:[(0,i.jsx)("div",{className:"col-lg-3 col-md-4 col-sm-12",children:(0,i.jsxs)("div",{className:"navbar__search",children:[(0,i.jsxs)("span",{children:[(0,i.jsx)("i",{className:"fa-solid fa-magnifying-glass fa-sm",style:{color:"#833988"}})," "]}),(0,i.jsx)("input",{type:"text",placeholder:"\u0627\u0628\u062d\u062b \u0639\u0646 \u0645\u0627\u062f\u0629",value:e,className:"search_course",onChange:e=>{s(e.target.value)}}),(0,i.jsxs)("a",{href:"#",className:"btn btn-s purple_btn search_btn",children:["\u0628\u062d\u062b"," "]})]})}),(0,i.jsx)("div",{className:"col-lg-3 col-md-4 col-sm-12",children:(0,i.jsxs)("select",{name:"department",value:g,onChange:e=>{N(e.target.value)},id:"lang",className:"select_dep",children:[(0,i.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0642\u0633\u0645"}),_.map((e=>(0,i.jsx)("option",{value:e.id,children:e.title},e.id)))]})}),(0,i.jsx)("div",{className:"col-lg-6 col-md-4 col-sm-12"})]})})}),(0,i.jsx)("div",{className:"container",children:(0,i.jsx)("div",{className:"row d-flex flex-wrap justify-content-center align-items-center",children:d.map(((e,s)=>{var a,c,t,l,o,n,d,u;return(0,i.jsx)("div",{className:"col-lg-4 col-md-6 col-sm-12",children:(0,i.jsx)(r.N_,{style:{textDecoration:"none"},to:"/mycoursedetails/".concat(e.course_id),children:(0,i.jsxs)("div",{className:"card card_cont",children:[(0,i.jsx)("img",{src:"https://res.cloudinary.com/durjqlivi/".concat(null===(a=e.course)||void 0===a?void 0:a.img),className:"card-img-top img-fluid card_img",alt:null===(c=e.course)||void 0===c?void 0:c.subject_name,loading:"lazy"}),(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("div",{children:(0,i.jsx)("p",{className:"card-text card_dep",children:(null===(t=e.course)||void 0===t||null===(l=t.Department)||void 0===l?void 0:l.title)||"No Department Available"})}),(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsx)("p",{className:"course_title_card",children:null===(o=e.course)||void 0===o?void 0:o.subject_name}),(0,i.jsx)("p",{className:"teacher_name_card",children:null===(n=e.course)||void 0===n||null===(d=n.teacher)||void 0===d?void 0:d.teacher_name})]}),(0,i.jsx)("hr",{style:{marginTop:"1px"}}),(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsx)("i",{className:"fa-solid fa-file card_icon",style:{color:"#F57D20"}}),(0,i.jsxs)("p",{className:"details_courses_card",children:[e.student_count," \u0637\u0627\u0644\u0628"]}),(0,i.jsx)("i",{className:"fa-solid fa-graduation-cap card_icon",style:{color:"#F57D20"}})," ",(0,i.jsxs)("p",{className:"details_courses_card",children:[e.lesson_count," \u062f\u0631\u0633"]}),(0,i.jsx)("i",{className:"fa-solid fa-clock card_icon",style:{color:"#F57D20"}})," ",(0,i.jsx)("p",{className:"details_courses_card",children:new Date(null===(u=e.course)||void 0===u?void 0:u.created_at).toLocaleDateString()})]})]})]})})},s)}))})})]})}},9661:(e,s,a)=>{e.exports=a.p+"static/media/corsee.4f9b650451891382b215.webp"}}]);
//# sourceMappingURL=591.28ebb102.chunk.js.map