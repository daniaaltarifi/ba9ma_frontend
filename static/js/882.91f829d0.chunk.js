"use strict";(self.webpackChunknaja=self.webpackChunknaja||[]).push([[882],{6882:(e,a,s)=>{s.r(a),s.d(a,{default:()=>i});var c=s(5043),l=s(6213),n=(s(7609),s(378)),t=s(9748),r=s(579);const i=function(){const[e,a]=(0,c.useState)(""),{user:s,updateUser:i}=(0,c.useContext)(n.R),{userId:o}=s,[m,d]=(0,c.useState)({name:"",email:"",img:"",password:"",confirmPassword:""}),[p,u]=(0,c.useState)(null),h=(0,c.useRef)(null);(0,c.useEffect)((()=>{s.userId&&l.A.get("".concat(t.H,"/profile/getProfileUsers/").concat(s.userId)).then((e=>{d({name:e.data.name,email:e.data.email,img:e.data.img,password:"",confirmPassword:""}),u("https://res.cloudinary.com/durjqlivi/".concat(e.data.img))})).catch((e=>{console.error("There was an error fetching the profile!",e)}))}),[s.userId]);const g=e=>{const{name:a,value:s}=e.target;d((e=>({...e,[a]:s})))};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("section",{className:"margin_section",children:(0,r.jsx)("div",{className:"container text-center",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"col-lg-3 col-md-4 col-sm-12 ",children:[(0,r.jsx)("p",{className:"profile_title",children:"\u062d\u0633\u0627\u0628\u064a"}),(0,r.jsx)("button",{className:"img_profile",onClick:()=>{h.current&&h.current.click()},children:(0,r.jsx)("img",{src:p,alt:"profile",className:"img-fluid",loading:"lazy"})}),(0,r.jsx)("input",{type:"file",name:"img",ref:h,style:{display:"none"},onChange:e=>{const a=e.target.files[0];if(a){d((e=>({...e,img:a})));const e=URL.createObjectURL(a);return u(e),()=>URL.revokeObjectURL(e)}}})]}),(0,r.jsxs)("div",{className:"col-lg-9 col-md-8 col-sm-12",children:[(0,r.jsxs)("div",{className:"row m-5",children:[(0,r.jsxs)("div",{className:"col-lg-6 col-md-12 col-sm-12",children:[(0,r.jsx)("p",{className:"title_of_input_auth",children:"\u0627\u0644\u0627\u0633\u0645"}),(0,r.jsx)("input",{type:"text",className:"search_blog",name:"name",value:m.name,onChange:g})]}),(0,r.jsxs)("div",{className:"col-lg-6 col-md-12 col-sm-12",children:[(0,r.jsx)("p",{className:"title_of_input_auth",children:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a"}),(0,r.jsx)("input",{type:"text",className:"search_blog",name:"email",value:m.email,onChange:g})]})]}),(0,r.jsxs)("div",{className:"row m-5",children:[(0,r.jsxs)("div",{className:"col-lg-6 col-md-12 col-sm-12",children:[(0,r.jsx)("p",{className:"title_of_input_auth",children:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"}),(0,r.jsx)("input",{type:"password",className:"search_blog",name:"password",value:m.password,onChange:g})]}),(0,r.jsxs)("div",{className:"col-lg-6 col-md-12 col-sm-12 ",children:[(0,r.jsx)("p",{className:"title_of_input_auth",children:"\u062a\u0623\u0643\u064a\u062f \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"}),(0,r.jsx)("input",{type:"password",className:"search_blog",name:"confirmPassword",value:m.confirmPassword,onChange:g})]})]}),e&&(0,r.jsx)("p",{className:"success_message",children:e}),(0,r.jsx)("button",{type:"button",className:"btn purple_btn mb-2 px-5",onClick:e=>{e.preventDefault(),(async()=>{const e=new FormData;e.append("name",m.name),e.append("email",m.email),e.append("password",m.password),e.append("confirmPassword",m.confirmPassword),m.img instanceof File&&e.append("img",m.img);try{const c=await l.A.put("".concat(t.H,"/profile/updateProfile/").concat(s.userId),e,{headers:{"Content-Type":"multipart/form-data"}});u("https://res.cloudinary.com/durjqlivi/".concat(c.data.img)),a("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u062d\u0633\u0627\u0628\u0643"),i(m.name,o,c.data.img),d((e=>({...e,name:c.data.name,img:c.data.img})))}catch(c){console.error("Error updating profile:",c)}})()},children:"\u062d\u0641\u0638"})]})]})})})})}},7609:()=>{}}]);
//# sourceMappingURL=882.91f829d0.chunk.js.map